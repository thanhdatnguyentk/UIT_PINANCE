<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="logo">UIT Pinance</div>
    <nav>
      <a href="{{ url_for('dashboard') }}">Dashboard</a>
      <a href="{{ url_for('watchlist') }}">Watchlist</a>
      <a href="#">Markets</a>
      <a href="{{ url_for('pending_orders')}}">Orders</a>     
  
      <a href="{{ url_for('help_page')}}">Help</a>
 
    </nav>
  </aside>

  <div class="main-content">
    <header class="topbar">
        <div class="breadcrumbs">Ch·ªânh s·ª≠a th√¥ng tin</div>
      
        <section class="search-form-area">
            <form method="get" action="{{ url_for('company_search') }}" class="search-form">
                <input type="text" name="query" class="search-input" placeholder="Nh·∫≠p m√£ ho·∫∑c t√™n c√¥ng ty..." value="{{ query }}" />
                <button type="submit" class="search-button">üîç</button>
            </form>
        </section>
        <div class="topbar-right">
          <div class="profile-menu">
            <img
              src="{{ url_for('static', filename='images/avatar.png') }}"
              alt="Avatar"
              class="avatar"
              onclick="toggleProfileDropdown()"
            />
            <div id="profileDropdown" class="dropdown-content">
              <div class="user-info">
                <img
                  src="{{ url_for('static', filename='images/avatar.png') }}"
                  alt="Avatar"
                  class="avatar-lg"
                />
                <div>
                  <p class="name">
                    {{ user.first_name }} {{ user.last_name }}
                  </p>
                  <p class="email">{{ user_email }}</p>
                </div>
              </div>
                <a href="{{ url_for('edit_profile') }}">Ch·ªânh s·ª≠a h·ªì s∆°</a>
                <a href="{{ url_for('asset_distribution') }}">Ph√¢n b·ªï t√†i s·∫£n</a>
                <a href="{{ url_for('transactions') }}">L·ªãch s·ª≠ giao d·ªãch</a>
              <a href="{{ url_for('deposit') }}">N·∫°p ti·ªÅn</a>
              <a href="{{ url_for('withdraw') }}">R√∫t ti·ªÅn</a>
              <a href="{{ url_for('logout') }}">ƒêƒÉng xu·∫•t</a>
            </div>
          </div>
        </div>
      </header>

    <section class="form-section" style="margin: 2rem;">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flashes">
            {% for category, msg in messages %}
              <li class="{{ category }}">{{ msg }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      <form method="POST" class="form-container">
        <label>H·ªç:</label>
        <input type="text" name="first_name" value="{{ user.first_name }}" required />

        <label>T√™n:</label>
        <input type="text" name="last_name" value="{{ user.last_name }}" required />

        <label>Gi·ªõi t√≠nh:</label>
        <select name="gender" required>
          <option value="Nam"   {% if user.gender=='Nam'   %}selected{% endif %}>Nam</option>
          <option value="N·ªØ"    {% if user.gender=='N·ªØ'    %}selected{% endif %}>N·ªØ</option>
          <option value="Kh√°c"  {% if user.gender=='Kh√°c'  %}selected{% endif %}>Kh√°c</option>
        </select>

        <label>Ng√†y sinh:</label>
        <input
          type="date"
          name="birthday"
          value="{{ user.birthday }}"
          max="{{ max_date }}"
          required
        />

        <label>Email:</label>
        <input
          type="email"
          name="email"
          value="{{ user.email }}"
          required
        />

        <label>S·ªë ƒëi·ªán tho·∫°i:</label>
        <input
          type="text"
          name="phone"
          value="{{ user.phone }}"
          pattern="\d{10}"
          required
        />

        <label>Ph∆∞∆°ng th·ª©c thanh to√°n:</label>
        <input
          type="text"
          name="payment_method"
          value="{{ user.payment_method }}"
          required
        />

        <button type="submit" class="btn btn-primary" style="margin-top:1rem;">
          L∆∞u thay ƒë·ªïi
        </button>
      </form>
    </section>
  </div>
</div>
<script>
    function toggleProfileDropdown() {
      document.getElementById("profileDropdown").classList.toggle("show");
    }
    window.onclick = function (event) {
      if (!event.target.matches(".avatar")) {
        var dropdowns = document.getElementsByClassName("dropdown-content");
        for (var i = 0; i < dropdowns.length; i++) {
          var openDropdown = dropdowns[i];
          if (openDropdown.classList.contains("show")) {
            openDropdown.classList.remove("show");
          }
        }
      }
    };
  </script>
</body>
</html>
